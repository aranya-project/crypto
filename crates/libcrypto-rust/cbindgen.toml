language = "C"
header = """
/*
 * Copyright (c) SpiderOak, Inc. All rights reserved.
 */
/**
 * @file spideroak-crypto.h
 * @brief External header file containing C function definitions
 * for the Aranya client library.
 */
 """
trailer = ""
include_guard = "SPIDEROAK_CRYPTO_H"
pragma_once = true
autogen_warning = "/* Code generated by `capi`. DO NOT EDIT. */"
namespaces = []
using_namespaces = []
sys_includes = [
    "stdint.h",
    "stdbool.h",
    "stddef.h",
]
includes = []
no_includes = true
cpp_compat = true
after_includes = """

#ifndef __has_attribute
    #define __has_attribute(x) 0
#endif /* __has_attribute */

#if !defined(SPIDEROAK_CRYPTO_ALIGNED)
    #if __has_attribute(aligned)
        #define SPIDEROAK_CRYPTO_ALIGNED(n) __attribute__((aligned(n)))
    #else
        #error "compiler must support `aligned` attribute"
    #endif
#endif /* SPIDEROAK_CRYPTO_ALIGNED */

#if !defined(SPIDEROAK_CRYPTO_DESIGNATED_INIT)
    #if __has_attribute(designated_init)
        #define SPIDEROAK_CRYPTO_DESIGNATED_INIT __attribute__((designated_init))
    #else
        #define SPIDEROAK_CRYPTO_DESIGNATED_INIT
    #endif
#endif /* SPIDEROAK_CRYPTO_DESIGNATED_INIT */

#if !defined(SPIDEROAK_CRYPTO_MUST_USE)
    #if __has_attribute(warn_unused_result)
        #define SPIDEROAK_CRYPTO_MUST_USE __attribute__((warn_unused_result))
    #else
        #define SPIDEROAK_CRYPTO_MUST_USE
    #endif
#endif /* SPIDEROAK_CRYPTO_MUST_USE */

#if !defined(SPIDEROAK_CRYPTO_NO_RETURN)
    #if __has_attribute(noreturn)
        #define SPIDEROAK_CRYPTO_NO_RETURN __attribute__((noreturn))
    #else
        #define SPIDEROAK_CRYPTO_NO_RETURN
    #endif
#endif /* SPIDEROAK_CRYPTO_NO_RETURN */

#if !defined(SPIDEROAK_CRYPTO_NON_NULL)
    #if defined(__gnu__)
        #if __has_attribute(nonnull)
            #define SPIDEROAK_CRYPTO_NON_NULL __attribute__((nonnull))
        #endif
    #elif defined(__clang__)
        #define SPIDEROAK_CRYPTO_NON_NULL _Nonnull
    #else
        #define SPIDEROAK_CRYPTO_NON_NULL
    #endif
#endif /* SPIDEROAK_CRYPTO_NON_NULL */

#if !defined(SPIDEROAK_CRYPTO_PACKED)
    #if __has_attribute(packed)
        #define SPIDEROAK_CRYPTO_PACKED __attribute__((packed))
    #else
        #define SPIDEROAK_CRYPTO_PACKED
    #endif
#endif /* SPIDEROAK_CRYPTO_PACKED */

/**
 * Unused.
 */
typedef struct ENGINE ENGINE;
"""
braces = "SameLine"
line_length = 80
tab_width = 4
documentation = true
documentation_style = "doxy"
documentation_length = "full"
usize_is_size_t = true
style = "both"

[defines]
"target_os = macos" = "__APPLE__"
"target_os = linux" = "__linux__"
"target_os = vxworks" = "__VXWORKS__"
"target_arch = x86_64" = "__x86_64__"

[export]
renaming_overrides_prefixing = true

[export.pre_body]

[enum]
rename_variants = "ScreamingSnakeCase"
prefix_with_name = true
must_use = "SPIDEROAK_CRYPTO_MUST_USE"

[fn]
must_use = "SPIDEROAK_CRYPTO_MUST_USE"
no_return = "SPIDEROAK_CRYPTO_NO_RETURN"

[layout]
packed = "SPIDEROAK_CRYPTO_PACKED"
aligned_n = "SPIDEROAK_CRYPTO_ALIGNED"

[parse]
# Required because we expand capi to generate doc comments, which
# uses -Zunpretty=expanded, which requires nightly, which screws
# up clippy, etc. afterward because the packages were compiled
# with a different compiler.
clean = true

[parse.expand]
default_features = false
features = ["cbindgen"]
crates = [
    "spideroak-libcrypto-rust",
    "spideroak-libcrypto",
]

[ptr]
non_null_attribute = "SPIDEROAK_CRYPTO_NON_NULL"

[struct]
# We hack in support for `designated_init` via `must_use`.
must_use = "SPIDEROAK_CRYPTO_DESIGNATED_INIT"
